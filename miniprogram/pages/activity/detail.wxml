<!--pages/activity/detail.wxml-->
<view class="activity-detail-page">
  <view wx:if="{{!loading && activity}}">
    <!-- å›¾ç‰‡è½®æ’­ -->
    <view class="image-gallery">
      <swiper 
        class="gallery-swiper" 
        indicator-dots="{{true}}"
        indicator-color="rgba(255,255,255,0.5)"
        indicator-active-color="#ffffff"
        autoplay="{{false}}"
        bindchange="onSwiperChange"
        bindtap="previewImages"
      >
        <swiper-item wx:for="{{activity.images && activity.images.length > 0 ? activity.images : [activity.coverImage]}}" wx:key="index">
          <image class="gallery-image" src="{{item}}" mode="aspectFill" />
        </swiper-item>
      </swiper>
      <view class="gallery-indicator">{{currentImageIndex + 1}}/{{activity.images && activity.images.length > 0 ? activity.images.length : 1}}</view>
    </view>

    <!-- æ´»åŠ¨ä¿¡æ¯ -->
    <view class="activity-header">
      <view class="header-top">
        <text class="activity-title">{{activity.title}}</text>
        <view class="activity-tags">
          <view wx:if="{{activity.isHot}}" class="tag tag-hot">ğŸ”¥ çƒ­é—¨</view>
          <view wx:if="{{activity.isNew}}" class="tag tag-new">ğŸ†• æ–°å“</view>
        </view>
      </view>
      <text class="activity-subtitle">{{activity.subtitle}}</text>
      
      <view class="price-section">
        <view class="price-main">
          <text class="price-symbol">Â¥</text>
          <text class="price-value">{{activity.price}}</text>
        </view>
        <view wx:if="{{activity.originalPrice > activity.price}}" class="price-info">
          <text class="price-original">åŸä»· Â¥{{activity.originalPrice}}</text>
        </view>
      </view>

      <view class="activity-stats">
        <view class="stat-item">
          <text class="stat-icon">ğŸ‘</text>
          <text class="stat-text">{{activity.viewCount || 0}}äººæµè§ˆ</text>
        </view>
        <view class="stat-item">
          <text class="stat-icon">ğŸ‰</text>
          <text class="stat-text">{{activity.orderCount || 0}}äººå‚åŠ </text>
        </view>
      </view>
    </view>

    <!-- æ´»åŠ¨ä»‹ç» -->
    <view class="content-section">
      <view class="section-title">ğŸ“ æ´»åŠ¨ä»‹ç»</view>
      <view class="section-content">
        <text class="intro-text">{{activity.description}}</text>
      </view>
    </view>

    <!-- è¯¦ç»†è¯´æ˜ -->
    <view wx:if="{{activity.details}}" class="content-section">
      <view class="section-title">ğŸ“‹ è¯¦ç»†è¯´æ˜</view>
      <view class="section-content">
        <text class="details-text">{{activity.details}}</text>
      </view>
    </view>

    <!-- å¯é€‰æ‘„å½±å¸ˆ -->
    <view wx:if="{{photographers.length > 0}}" class="content-section">
      <view class="section-title">ğŸ‘¨â€ğŸ¨ å¯é€‰æ‘„å½±å¸ˆï¼ˆ{{photographers.length}}ä½ï¼‰</view>
      <scroll-view class="photographers-scroll" scroll-x="true">
        <view wx:for="{{photographers}}" wx:key="_id" class="photographer-item">
          <image class="photographer-avatar" src="{{item.avatar || '/images/default-avatar.png'}}" mode="aspectFill" />
          <text class="photographer-name">{{item.name}}</text>
          <view class="photographer-rating">
            <text class="rating-star">â­</text>
            <text class="rating-value">{{item.rating || 5.0}}</text>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- åº•éƒ¨æŒ‰é’® -->
    <view class="bottom-bar">
      <button class="btn-join" bindtap="joinActivity">
        ç«‹å³å‚åŠ  Â¥{{activity.price}}
      </button>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-wrapper">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>

