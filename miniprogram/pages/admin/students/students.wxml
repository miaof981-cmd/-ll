<!--pages/admin/students/students.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨æœç´¢æ  -->
  <view class="search-section">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input" 
        placeholder="æœç´¢å­¦å·ã€å§“å" 
        value="{{keyword}}"
        bindinput="onKeywordInput"
        bindconfirm="search"
      />
    </view>
    <button class="btn-add-mini" bindtap="addStudent">
      <text>â• æ·»åŠ </text>
    </button>
  </view>

  <!-- å­¦ç”Ÿåˆ—è¡¨ - iOSé€šè®¯å½•é£æ ¼ -->
  <view class="student-list">
    <view wx:if="{{currentPageStudents.length === 0}}" class="empty-state">
      <view class="empty-icon">ğŸ‘¥</view>
      <text class="empty-text">æš‚æ— å­¦ç”Ÿ</text>
    </view>

    <view 
      wx:for="{{currentPageStudents}}" 
      wx:key="studentId" 
      class="student-card"
    >
      <!-- å·¦ä¾§ï¼šå¤´åƒå’ŒåŸºæœ¬ä¿¡æ¯ -->
      <view class="card-left">
        <view class="avatar-circle">
          <text class="avatar-letter">{{item.name.substring(0, 1)}}</text>
        </view>
        <view class="student-details">
          <text class="student-name">{{item.name}}</text>
          <text class="student-meta">å­¦å· {{item.studentId}}</text>
          <text class="student-meta">å®¶é•¿ {{item.parentName}}</text>
        </view>
      </view>

      <!-- å³ä¾§ï¼šç®¡ç†æŒ‰é’® -->
      <view class="card-right" bindtap="manageRecords" data-studentid="{{item.studentId}}">
        <text class="more-text">ç®¡ç†</text>
        <text class="more-icon">â€º</text>
      </view>
    </view>
  </view>

  <!-- åˆ†é¡µæŒ‡ç¤ºå™¨ -->
  <view wx:if="{{totalPages > 1}}" class="pagination-mini">
    <button 
      class="btn-page-mini" 
      bindtap="prevPage" 
      disabled="{{pageIndex === 1}}"
    >
      â€¹
    </button>
    <text class="page-indicator">{{pageIndex}} / {{totalPages}}</text>
    <button 
      class="btn-page-mini" 
      bindtap="nextPage" 
      disabled="{{pageIndex === totalPages}}"
    >
      â€º
    </button>
  </view>
</view>
