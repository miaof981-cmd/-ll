<!--pages/admin/admins/admins.wxml-->
<view class="admins-page">
  <!-- é¡¶éƒ¨æ  -->
  <view class="top-bar">
    <!-- æœç´¢æ¡† -->
    <view class="search-box">
      <input 
        class="search-input"
        type="text" 
        placeholder="æœç´¢ç®¡ç†å‘˜"
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        bindconfirm="onSearch"
      />
      <text class="search-icon">ğŸ”</text>
    </view>

    <!-- æ·»åŠ æŒ‰é’® -->
    <view class="add-btn" bindtap="addAdmin">
      <text>æ·»åŠ </text>
    </view>
  </view>

  <!-- çŠ¶æ€ç­›é€‰ -->
  <view class="filter-tabs">
    <view 
      wx:for="{{statusTabs}}" 
      wx:key="key"
      class="tab-item {{filterStatus === item.key ? 'active' : ''}}"
      bindtap="switchStatus"
      data-status="{{item.key}}"
    >
      {{item.label}}
    </view>
  </view>

  <!-- ç®¡ç†å‘˜åˆ—è¡¨ -->
  <view class="admin-list">
    <view wx:if="{{admins.length === 0}}" class="empty-tip">
      <text class="empty-icon">ğŸ‘¥</text>
      <text class="empty-text">æš‚æ— ç®¡ç†å‘˜</text>
    </view>

    <view 
      wx:for="{{admins}}" 
      wx:key="_id"
      class="admin-card"
    >
      <view class="admin-header">
        <view class="admin-info">
          <view class="admin-name">
            {{item.name}}
            <view class="status-badge {{item.isActive ? 'active' : 'inactive'}}">
              {{item.isActive ? 'å¯ç”¨ä¸­' : 'å·²ç¦ç”¨'}}
            </view>
          </view>
          <view class="admin-contact">
            <text class="contact-item">ğŸ“± {{item.phone || 'æœªå¡«å†™'}}</text>
          </view>
          <view class="admin-openid">OpenID: {{item.openid}}</view>
        </view>
      </view>

      <view class="admin-meta">
        <text class="meta-item">æƒé™: {{item.permissions.join(', ')}}</text>
        <text class="meta-item">åˆ›å»º: {{item.createdAt}}</text>
      </view>

      <view class="action-buttons">
        <button 
          class="btn-action btn-edit"
          bindtap="editAdmin"
          data-id="{{item._id}}"
        >
          ç¼–è¾‘
        </button>
        <button 
          class="btn-action {{item.isActive ? 'btn-disable' : 'btn-enable'}}"
          bindtap="toggleStatus"
          data-id="{{item._id}}"
          data-active="{{item.isActive}}"
        >
          {{item.isActive ? 'ç¦ç”¨' : 'å¯ç”¨'}}
        </button>
        <button 
          class="btn-action btn-delete"
          bindtap="deleteAdmin"
          data-id="{{item._id}}"
          data-name="{{item.name}}"
        >
          åˆ é™¤
        </button>
      </view>
    </view>
  </view>
</view>

