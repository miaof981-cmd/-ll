<view class="review-page">
  <!-- å¤´éƒ¨ç»Ÿè®¡ -->
  <view class="header">
    <view class="stat">
      <text class="count">{{orders.length}}</text>
      <text class="label">å¾…å®¡æ ¸è®¢å•</text>
    </view>
    <view class="tip">ä»¥å›¾ç‰‡ä¸ºä¸­å¿ƒï¼Œå¿«é€Ÿå®¡æ ¸æ‘„å½±å¸ˆä½œå“</view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:elif="{{orders.length === 0}}" class="empty">
    <text class="empty-icon">âœ…</text>
    <text class="empty-text">æš‚æ— å¾…å®¡æ ¸è®¢å•</text>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view wx:else class="orders-list">
    <view wx:for="{{orders}}" wx:key="_id" class="order-card">
      <!-- ç‚¹å‡»å¡ç‰‡ä¸»ä½“åŒºåŸŸæŸ¥çœ‹è¯¦æƒ… -->
      <view class="card-main" bindtap="viewDetail" data-id="{{item._id}}">
        <!-- è®¢å•åŸºç¡€ä¿¡æ¯ -->
        <view class="order-info">
          <view class="info-row">
            <text class="activity-name">{{item.activityInfo.name || 'æ´»åŠ¨'}}</text>
            <text class="order-no">è®¢å•å·ï¼š{{item.orderNo}}</text>
          </view>
          <view class="info-row">
            <text class="photographer">ğŸ“· {{item.photographerInfo.name || 'æ‘„å½±å¸ˆ'}}</text>
            <text class="submit-time">{{item.submittedAt}}</text>
          </view>
        </view>

        <!-- ä½œå“å›¾ç‰‡å±•ç¤ºï¼ˆæ ¸å¿ƒï¼‰ -->
        <view class="photos-section">
          <view class="photos-header">
            <text class="section-title">ğŸ“¸ æäº¤ä½œå“ï¼ˆ{{item.photos.length}}å¼ ï¼‰</text>
            <text class="tap-hint">ğŸ‘† ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</text>
          </view>
          <view class="photos-grid">
            <view 
              wx:for="{{item.photos}}" 
              wx:for-item="photo"
              wx:for-index="photoIndex"
              wx:key="photoIndex"
              class="photo-item"
              catchtap="previewImage"
              data-images="{{item.photos}}"
              data-current="{{photo}}"
            >
              <image src="{{photo}}" mode="aspectFill" class="photo" />
            </view>
          </view>
        </view>

        <!-- è®¢å•æ—¶é—´çº¿ -->
        <view class="timeline-section">
          <view class="timeline-title">ğŸ“‹ æœ€æ–°è¿›å±•</view>
          <view class="timeline-compact">
            <!-- åˆ›å»ºè®¢å• -->
            <view class="timeline-item">
              <view class="timeline-dot"></view>
              <view class="timeline-content">
                <text class="timeline-label">åˆ›å»ºè®¢å•</text>
                <text class="timeline-time">{{item.createdAt}}</text>
              </view>
            </view>
            
            <!-- æ‘„å½±å¸ˆæ¥å• -->
            <view wx:if="{{item.acceptedAt}}" class="timeline-item">
              <view class="timeline-dot"></view>
              <view class="timeline-content">
                <text class="timeline-label">æ‘„å½±å¸ˆæ¥å•</text>
                <text class="timeline-time">{{item.acceptedAt}}</text>
              </view>
            </view>
            
            <!-- æäº¤ä½œå“ï¼ˆå½“å‰çŠ¶æ€ï¼‰ -->
            <view class="timeline-item current">
              <view class="timeline-dot active"></view>
              <view class="timeline-content">
                <text class="timeline-label">ğŸ“¸ æäº¤ä½œå“ï¼ˆå¾…å®¡æ ¸ï¼‰</text>
                <text class="timeline-time">{{item.submittedAt}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- å¿«é€Ÿæ“ä½œæŒ‰é’®ï¼ˆç‹¬ç«‹åŒºåŸŸï¼Œä¸è§¦å‘è¯¦æƒ…ï¼‰ -->
      <view class="actions">
        <button 
          class="action-btn approve" 
          bindtap="quickApprove"
          data-id="{{item._id}}"
          catchtap="stopPropagation"
        >
          <text class="btn-icon">âœ“</text>
          <text class="btn-text">é€šè¿‡</text>
        </button>
        <button 
          class="action-btn reject" 
          bindtap="quickReject"
          data-id="{{item._id}}"
          catchtap="stopPropagation"
        >
          <text class="btn-icon">âœ•</text>
          <text class="btn-text">æ‹’ç»</text>
        </button>
        <view class="detail-hint">
          <text>ğŸ‘† ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹å®Œæ•´è¯¦æƒ…</text>
        </view>
      </view>
    </view>
  </view>
</view>

