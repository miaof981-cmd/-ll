<!--pages/login/login.wxml-->
<view class="login-container">
  <!-- 顶部装饰 -->
  <view class="header-decoration">
    <view class="decoration-circle circle-1"></view>
    <view class="decoration-circle circle-2"></view>
    <view class="decoration-circle circle-3"></view>
  </view>

  <!-- 登录卡片 -->
  <view class="login-card">
    <!-- Logo 和标题 -->
    <view class="login-header">
      <view class="logo-large">🎓</view>
      <text class="login-title">学校官网登录</text>
      <text class="login-subtitle">欢迎回来，请登录您的账户</text>
    </view>

    <!-- 登录类型切换 -->
    <view class="type-tabs">
      <view 
        class="type-tab {{loginType === 'parent' ? 'active' : ''}}" 
        bindtap="switchLoginType" 
        data-type="parent"
      >
        <text>学生/家长</text>
      </view>
      <view 
        class="type-tab {{loginType === 'admin' ? 'active' : ''}}" 
        bindtap="switchLoginType" 
        data-type="admin"
      >
        <text>管理员</text>
      </view>
    </view>

    <!-- 登录表单 -->
    <view class="login-form">
      <view class="form-group">
        <view class="form-label">
          <text class="label-icon">👤</text>
          <text>{{loginType === 'parent' ? '学号' : '用户名'}}</text>
        </view>
        <view class="input-wrapper">
          <input 
            class="input-field" 
            type="text" 
            placeholder="{{loginType === 'parent' ? '请输入学号' : '请输入用户名'}}"
            value="{{studentId}}"
            bindinput="onStudentIdInput"
            placeholder-class="input-placeholder"
          />
        </view>
      </view>

      <view class="form-group">
        <view class="form-label">
          <text class="label-icon">🔒</text>
          <text>密码</text>
        </view>
        <view class="input-wrapper">
          <input 
            class="input-field" 
            type="password" 
            placeholder="请输入密码"
            value="{{password}}"
            bindinput="onPasswordInput"
            placeholder-class="input-placeholder"
          />
        </view>
      </view>

      <view class="form-actions">
        <text class="forgot-link" bindtap="forgotPassword">忘记密码？</text>
      </view>

      <button class="btn-login" bindtap="handleLogin" loading="{{loading}}">
        {{loading ? '登录中...' : '登录'}}
      </button>

      <!-- 申请入学入口 -->
      <view class="register-link" bindtap="goToApply">
        <text wx:if="{{!hasApplication}}">还没有账号？</text>
        <text wx:if="{{hasApplication}}">已提交申请</text>
        <text class="link-text">
          {{hasApplication ? '点击查看进度 →' : '点此申请入学 →'}}
        </text>
      </view>
    </view>

    <!-- 提示信息 -->
    <view class="hint-box">
      <view class="hint-title">
        <text class="hint-icon">ℹ️</text>
        <text>登录说明</text>
      </view>
      <view class="hint-list">
        <view class="hint-item">
          <text class="hint-label">学生账号：</text>
          <text class="hint-value">使用学号登录，默认密码 123456</text>
        </view>
        <view class="hint-item">
          <text class="hint-label">管理员：</text>
          <text class="hint-value">admin / admin123</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部文字 -->
  <view class="footer-text">
    <text>© 2025 学校官网 · 安全可靠</text>
  </view>
</view>
